<div *ngIf="cargando" class="container mt-5" style="height: 80%">
    <div class="d-flex justify-content-center align-items-center" style="height: 100%">
        <div class="spinner-grow text-success" role="status" style="width: 3rem; height: 3rem;">
            <span class="sr-only">Loading...</span>
        </div>
    </div>
</div>

<ng-template #contrasena_modal let-modal>
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">Cambiar contraseña</h4>
      <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
        <span aria-hidden="true">×</span>
      </button>
    </div>
  
    <div class="modal-body">
        <form [formGroup]="cambiarContrasenaForm" (ngSubmit)="cambiarContrasena()">
            <div class="form-group row">
                <label class="col-sm-2 col-form-label"> <p class="text-sm"> Contraseña actual </p>  </label>
                <div class="col-sm-10">
                    <input type="password" class="form-control" formControlName="contrasena_actual">
                </div>
            </div>

            <div class="form-group row">
                <label class="col-sm-2 col-form-label"> <p class="text-sm"> Nueva contraseña </p>  </label>
                <div class="col-sm-10">
                    <input type="password" class="form-control" formControlName="contrasena_nueva">
                </div>
            </div>
        
            <button type="submit" class="btn btn-success ml-2">
                Guardar
            </button>
        </form>
    </div>
</ng-template>

<div *ngIf="!cargando" class="container mt-3">
    <hr>
    <div class="row">
        <div class="col-md-2">
            <img src="assets/img/user.jpg" alt="">
        </div>
        <div class="col-md-10">
            <h3> {{usuario.nombre_usuario | titlecase}} </h3>
        </div>
    </div>
    <hr>
    <form [formGroup]="actualizarUsuarioForm" (ngSubmit)="actualizarUsuario()">
        <div class="form-group row">
            <label class="col-sm-2 col-form-label"> <p class="text-sm"> Nombre completo </p>  </label>
            <div class="col-sm-10">
                <input type="text" class="form-control" formControlName="nombre_usuario" [class.is_invalid]="nombreUsuarioNoValido">
                <small *ngIf="nombreUsuarioNoValido" class="text-danger animated fadeIn">El nombre es obligatorio, debe contener mínimo 5 caracteres.</small>
            </div>
        </div>

        <div class="form-group row">
            <label class="col-sm-2 col-form-label"> <p class="text-sm"> Cargo empresa </p>  </label>
            <div class="col-sm-10">
                <input type="text" class="form-control" readonly value="{{usuario.cargo_empresa}}">
            </div>
        </div>

        <div class="form-group row">
            <label class="col-sm-2 col-form-label"> <p class="text-sm"> Teléfono </p>  </label>
            <div class="col-sm-10">
                <input type="number" class="form-control" formControlName="telefono">
            </div>
        </div>

        <div class="form-group row">
            <label class="col-sm-2 col-form-label"> <p class="text-sm"> Correo electrónico </p>  </label>
            <div class="col-sm-10">
                <input type="email" class="form-control" formControlName="correo">
            </div>
        </div>
        <button [routerLink]="['/lotes']" class="btn btn-danger"> 
            <i class="fas fa-arrow-circle-left"></i> Cancelar 
        </button>
        <button type="submit" class="btn btn-success ml-2">
            Guardar cambios
        </button>
        <button type="button" (click)="openCambiarContrasena(contrasena_modal)" class="btn btn-orange ml-2">
            Cambiar contraseña
        </button>
    </form>
    <hr>
</div>